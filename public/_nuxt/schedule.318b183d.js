import{b6 as m,r as d,aP as v,b7 as a}from"./entry.76ac6703.js";import{u as _}from"./useConfetti.e0764db6.js";const w=m("schedule",()=>{const c=d([]),r=d(null),l=v();async function i(){try{const{data:e}=await a("/schedules",{});if(e.value){const{schedules:s}=e.value;c.value=s}}catch(e){console.log(e)}}async function h(e){try{return await a("/schedules",{method:"POST",body:{...e},onResponse(t){c.value.push(t.response._data.schedule);const n={title:"Schedule Created",message:"Your schedule has been successfully created! 🎉📅",type:"success"};l.add(n.title,n.message,"success")}})}catch(s){console.log(s)}}async function p(e,s){try{return await a("/schedules/"+e,{method:"PUT",body:{...s},onResponse(n){const o={title:"Schedule Updated",message:"Your schedule has been successfully updated! 🔄📅",type:"success"};l.add(o.title,o.message,"success"),c.value=c.value.map(u=>u._id==e?n.response._data.schedule:u)}})}catch(t){console.log(t)}}async function f(e){try{return await a("/schedules/"+e,{method:"DELETE",onResponse(t){c.value=c.value.filter(o=>o._id==e?t.response._data.schedule:o);const n={title:"Schedule Deleted",message:"The schedule has been successfully deleted. 🗓️",type:"success"};l.add(n.title,n.message,"success")}})}catch(s){console.log(s)}}async function y(e){const s=c.value.find(t=>t._id==e);try{return await a("/schedules/"+e,{method:"PUT",body:{...s,pinned:!(s!=null&&s.pinned)},onResponse(n){c.value=c.value.map(o=>o._id==e?n.response._data.schedule:o)}})}catch(t){console.log(t)}}async function g(e){const s=c.value.find(t=>t._id==e);if(s)try{return await a("/schedules/"+e,{method:"PUT",body:{...s,finished:!s.finished},onResponse(n){let o=null;n.response._data.schedule.finished&&(o={title:"Schedule Completed",message:"Your schedule has been successfully completed! ✅📅",type:"success"},_()),o={title:"Schedule Updated",message:"Your schedule has been successfully updated! ✅📅",type:"success"},l.add(o.title,o.message,"success"),c.value=c.value.map(u=>u._id==e?n.response._data.schedule:u)}})}catch(t){console.log(t)}}return{schedules:c,schedule:r,getAll:i,create:h,update:p,togglePinned:y,destroy:f,toggleFinished:g}});export{w as u};
