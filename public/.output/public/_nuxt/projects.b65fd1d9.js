import{a as W}from"./VSelect.9994363c.js";import{a as v,V as z}from"./VList.fb699aef.js";import{d as I,r as y,aw as G,v as r,H as f,B as t,A as e,L as a,ag as N,G as se,aD as F,F as Q,c as L,V as u,y as x,C as i,ah as ne,x as V,Q as R,R as U,aU as q,b0 as ie,ae as E,af as de,J as M,a9 as K,aN as ce,z as J,aW as X,ac as ue,u as pe,O as me,aI as fe,aM as Y,_ as Z,t as _e,at as ge,b1 as ve,b2 as he,D as be,E as we}from"./entry.7bb5c275.js";import{u as A}from"./project.e6c691c0.js";import{V as B}from"./VSpacer.97b09192.js";import{V as j}from"./VBtn.b9a89bb9.js";import{V as ee}from"./VTextField.403b1d5e.js";import{_ as ye,V as xe}from"./VSkeletonLoader.1d30dc85.js";import{V as te}from"./VMenu.773dbdd7.js";import{V as ke}from"./VAlert.153789b3.js";import{V as oe}from"./VLayout.07e40625.js";import{V as ae}from"./VAppBar.7380b10f.js";import{V as je}from"./VDivider.122927b8.js";import{V as P}from"./VMain.0fae4c0b.js";import{V as Ve}from"./VNavigationDrawer.5de7271e.js";import{u as Ce}from"./useSectionsObject.93dbf052.js";import{V as $e}from"./VContainer.2db2c00e.js";import{V as H}from"./VCol.bab0e1b8.js";import"./VChip.79dac80a.js";import"./index.c5a19fc7.js";import"./ssrBoot.f83422f3.js";/* empty css              */import"./VProgressCircular.76063535.js";import"./VToolbarTitle.a3404411.js";const De=I({__name:"MemberListItem",props:{member:{},members:{}},emits:["update:members"],setup(h,{emit:b}){const n=h,d=y(n.member.role),p=b;return G(d,m=>{p("update:members",n.members.map(s=>s._id==n.member._id?{...s,role:m}:s))}),(m,s)=>(r(),f(v,{class:"pa-3 rounded-0 mb-2 border-b","prepend-avatar":m.member.user.picture,title:m.member.user.email.toString(),subtitle:m.member.user.name.toString()},{append:t(()=>[e(W,{density:"compact","hide-details":"","single-line":"",variant:"plain",modelValue:a(d),"onUpdate:modelValue":s[0]||(s[0]=w=>N(d)?d.value=w:null),items:["admin","member"]},null,8,["modelValue"])]),_:1},8,["prepend-avatar","title","subtitle"]))}}),Se={class:"d-flex align-center"},Ne={class:"mt-5"},ze=I({__name:"ManageRoleDialog",props:{project:{},showDialog:{type:Boolean}},emits:["update:showDialog"],setup(h,{emit:b}){const n=h,d=b,p=se({search:"",role:"all"}),{user:m}=F(Q()),s=y(n.project.members.filter(l=>l.role!="owner")),w=L(()=>JSON.stringify(n.project.members.filter(l=>l.role!="owner"))!=JSON.stringify(s.value)),_=L(()=>s.value.filter(l=>{var o;return l.user.email.includes(p.search)&&(p.role=="all"||l.role==p.role)&&l.user._id!=((o=m.value)==null?void 0:o._id)})),C=L(()=>n.project.members.find(l=>l.role=="owner")),k=L(()=>n.project.members.find(l=>{var o;return l.user._id==((o=m.value)==null?void 0:o._id)})),D=A(),S=y(!1);function T(){S.value=!0,D.updateRoles(n.project._id,s.value).then(()=>{S.value=!1,d("update:showDialog",!1)})}return G(()=>n.project.members.length,()=>{s.value=n.project.members.filter(l=>l.role!="owner")}),(l,o)=>{const $=De;return r(),f(q,{width:"550","model-value":l.showDialog,"onClick:outside":o[5]||(o[5]=g=>d("update:showDialog",!1))},{default:t(()=>[e(u,{class:"pa-5 pt-4 rounded-lg"},{default:t(()=>[x("h3",Se,[i(" Manage Roles "),e(B),e(j,{flat:"",size:"small",icon:"mdi-close",onClick:o[0]||(o[0]=g=>d("update:showDialog",!1))})]),x("div",null,[e(ee,{modelValue:a(p).search,"onUpdate:modelValue":o[2]||(o[2]=g=>a(p).search=g),density:"comfortable",label:"Enter person email address",class:"mt-2","single-line":"",variant:"outlined","hide-details":""},{append:t(()=>[e(W,{modelValue:a(p).role,"onUpdate:modelValue":o[1]||(o[1]=g=>a(p).role=g),density:"comfortable","single-line":"",variant:"outlined",class:"w-50","hide-details":"",items:["all","admin","member"]},null,8,["modelValue"])]),_:1},8,["modelValue"])]),e(z,{style:{overflow:"auto",height:"300px"}},{default:t(()=>{var g,c;return[e($,{members:a(_),disabled:"",key:"'owner'",member:a(C)},null,8,["members","member"]),((g=a(k))==null?void 0:g._id)!=((c=a(C))==null?void 0:c._id)?(r(),f($,{members:a(_),disabled:"",key:"current",member:a(k)},null,8,["members","member"])):ne("",!0),(r(!0),V(R,null,U(a(_),O=>(r(),f($,{members:a(_),"onUpdate:members":o[3]||(o[3]=re=>N(s)?s.value=re:null),key:O._id,member:O},null,8,["members","member"]))),128))]}),_:1}),x("div",Ne,[e(j,{onClick:T,"prepend-icon":"mdi-account-cog",variant:"elevated",class:"text-capitalize",flat:"",color:"primary",disabled:!a(w),loading:a(S)},{default:t(()=>[i("Update Roles")]),_:1},8,["disabled","loading"]),e(j,{class:"text-capitalize ml-2",flat:"",onClick:o[4]||(o[4]=g=>d("update:showDialog",!1))},{default:t(()=>[i("Cancel")]),_:1})])]),_:1})]),_:1},8,["model-value"])}}}),Re={key:1},Ie={class:"d-flex align-center"},Le={class:"text-error ml-2"},Me=x("p",{class:"text-h6"},"Are you sure you want to delete this project?",-1),Ue=I({__name:"ListItem",props:{project:{}},setup(h){const{user:b}=F(Q()),n=h,d=A(),p=L(()=>{var l;return((l=n.project.members.find(o=>{var $,g;return((($=o.user)==null?void 0:$._id)||o.user)==((g=b.value)==null?void 0:g._id)}))==null?void 0:l.role)||"member"}),m=y(!1),s=y(!1),w=y(!1),_=y(!1),C=y(),k=y(n.project.title),D=()=>{w.value=!0,setTimeout(()=>{C.value.select()},100)},S=y(!1);function T(){S.value=!0,d.remove(n.project._id).then(()=>{S.value=!1,_.value=!1})}return ie(C,()=>{w.value&&(w.value=!1,k.value!=n.project.title&&d.updateById(n.project._id,{title:k.value,sections:[]}))}),(l,o)=>{const $=ze,g=ye;return r(),V(R,null,[E((r(),f(v,{density:"compact","prepend-icon":"mdi-file-outline",onClick:o[9]||(o[9]=c=>l.$router.push({name:"r-access-projects-project",params:{project:l.project._id}})),class:"text-caption py-0 font-weight-regular text-capitalize text-no-wrap",active:l.project._id==(l._.provides[X]||l.$route).params.project},{append:t(()=>[a(p)=="owner"?(r(),f(M,{key:0},{default:t(()=>[i("mdi-account-tie")]),_:1})):a(p)=="admin"?(r(),f(M,{key:1},{default:t(()=>[i("mdi-account-key")]),_:1})):(r(),f(M,{key:2},{default:t(()=>[i("mdi-account")]),_:1})),e(te,null,{activator:t(({props:c})=>[e(j,K(c,{size:"25",flat:"",class:"rounded ml-2 bg-transparent",icon:"mdi-dots-horizontal"}),null,16)]),default:t(()=>[e(u,{width:"200",class:"pa-2"},{default:t(()=>[a(p)=="owner"?(r(),f(z,{key:0,class:"pa-0"},{default:t(()=>[e(v,{"prepend-icon":"mdi-share-outline",onClick:o[1]||(o[1]=c=>m.value=!0),density:"compact",class:"text-caption rounded mb-1"},{default:t(()=>[i("Share")]),_:1}),e(v,{"prepend-icon":"mdi-text-short",density:"compact",class:"text-caption rounded mb-1",onClick:D},{default:t(()=>[i("Rename")]),_:1}),e(v,{"prepend-icon":"mdi-account-cog-outline",onClick:o[2]||(o[2]=c=>s.value=!0),density:"compact",class:"text-caption rounded mb-1"},{default:t(()=>[i("Manage roles")]),_:1}),e(v,{"prepend-icon":"mdi-clipboard-outline",onClick:o[3]||(o[3]=()=>{}),density:"compact",class:"text-caption rounded mb-1",disabled:""},{default:t(()=>[i("Paste")]),_:1}),e(v,{"prepend-icon":"mdi-trash-can-outline",onClick:o[4]||(o[4]=c=>_.value=!0),density:"compact",class:"text-caption rounded mb-1 text-error"},{default:t(()=>[i("Delete")]),_:1})]),_:1})):a(p)=="admin"?(r(),f(z,{key:1,class:"pa-0"},{default:t(()=>[e(v,{"prepend-icon":"mdi-share-outline",onClick:o[5]||(o[5]=c=>m.value=!0),density:"compact",class:"text-caption rounded mb-1"},{default:t(()=>[i("Share")]),_:1}),e(v,{"prepend-icon":"mdi-text-short",density:"compact",class:"text-caption rounded mb-1",onClick:D},{default:t(()=>[i("Rename")]),_:1}),e(v,{"prepend-icon":"mdi-account-cog-outline",onClick:o[6]||(o[6]=c=>s.value=!0),density:"compact",class:"text-caption rounded mb-1"},{default:t(()=>[i("Manage roles")]),_:1}),e(v,{variant:"text",onClick:o[7]||(o[7]=c=>a(d).leave(l.project._id)),density:"compact",class:"text-caption text-error","prepend-icon":"mdi-logout",color:"error"},{default:t(()=>[i("Leave")]),_:1})]),_:1})):(r(),f(z,{key:2,class:"pa-0"},{default:t(()=>[e(v,{variant:"text",onClick:o[8]||(o[8]=c=>a(d).leave(l.project._id)),density:"compact",class:"text-caption text-error","prepend-icon":"mdi-logout",color:"error"},{default:t(()=>[i("Leave")]),_:1})]),_:1}))]),_:1})]),_:1})]),default:t(()=>[a(w)?E((r(),V("input",{key:0,type:"text","onUpdate:modelValue":o[0]||(o[0]=c=>N(k)?k.value=c:null),ref_key:"textField",ref:C,style:{width:"98%"}},null,512)),[[ce,a(k)]]):(r(),V("span",Re,J(a(k)),1))]),_:1},8,["active"])),[[de,!1]]),e($,{project:l.project,"show-dialog":a(s),"onUpdate:showDialog":o[10]||(o[10]=c=>N(s)?s.value=c:null)},null,8,["project","show-dialog"]),e(g,{showDialog:a(m),"onUpdate:showDialog":o[11]||(o[11]=c=>N(m)?m.value=c:null),project:l.project},null,8,["showDialog","project"]),e(q,{modelValue:a(_),"onUpdate:modelValue":o[14]||(o[14]=c=>N(_)?_.value=c:null),width:"550"},{default:t(()=>[e(u,{class:"pa-5 pt-4 rounded-lg"},{default:t(()=>[x("h3",Ie,[i(" Delete "),x("span",Le,J(l.project.title),1),e(B),e(j,{flat:"",size:"small",icon:"mdi-close",onClick:o[12]||(o[12]=c=>_.value=!1)})]),Me,e(ke,{border:"",variant:"tonal",class:"mt-2",type:"warning",text:"Warning: Deleting this project will permanently remove it from our records."}),e(ue,{class:"mt-5"},{default:t(()=>[e(B),e(j,{class:"text-capitalize mr-1",onClick:o[13]||(o[13]=c=>_.value=!1)},{default:t(()=>[i("Cancel")]),_:1}),e(j,{class:"text-capitalize","prepend-icon":"mdi-trash-can",variant:"elevated",color:"error",loading:a(S),onClick:T},{default:t(()=>[i("Delete project")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),Be={key:1,class:"pt-15 px-4 mt-15 d-flex flex-column align-center"},Pe=x("h3",{class:"text-center"},"Create your project",-1),Ae=x("p",{class:"text-caption font-weight-regular text-center"}," To create a project for tasks, analyze needs, plan, involve stakeholders, form a team, monitor progress. ",-1),Te=I({__name:"ListContainer",async setup(h){let b,n;const d=A(),{projects:p,project:m}=F(d),s=pe(),w=me();return[b,n]=fe(()=>d.getAll().then(()=>{m.value&&!w.params.project&&s.push({name:"r-access-projects-project",params:{project:m.value._id}})})),await b,n(),(_,C)=>{const k=Ue;return a(p).length>0?(r(),f(z,{key:0,class:"pa-0 bg-transparent"},{default:t(()=>[(r(!0),V(R,null,U(a(p),D=>(r(),f(k,{key:D.title,project:D},null,8,["project"]))),128))]),_:1})):(r(),V("div",Be,[Pe,Ae,e(j,{class:"mt-5 text-capitalize","prepend-icon":"mdi-plus",variant:"outlined",onClick:a(d).store},{default:t(()=>[i("Create new project")]),_:1},8,["onClick"])]))}}}),Fe=I({__name:"NavigationDrawer",props:["showNavigation"],setup(h){const b=y(!0),n=A();return(d,p)=>{const m=Te;return r(),f(Ve,{"model-value":h.showNavigation,class:"border-e",style:{"z-index":"50 !important"},floating:"",width:"280"},{default:t(()=>[e(oe,{class:"h-100"},{default:t(()=>[e(ae,{density:"compact",class:"border-b ml-0 pl-2",flat:""},{default:t(()=>[e(ee,{label:"Search...",variant:"solo-filled",flat:"","hide-details":"","single-line":"",density:"compact","prepend-inner-icon":"mdi-filter-variant"}),e(te,null,{activator:t(({props:s})=>[e(j,K({icon:"mdi-plus"},s,{size:"small",class:"ml-2",rounded:"",flat:"",color:"primary",variant:"elevated",onClick:p[0]||(p[0]=w=>b.value=!0)}),null,16)]),default:t(()=>[e(u,{class:"rounded-lg pa-2"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,{onClick:a(n).store,density:"compact",class:"rounded-lg mb-2 text-subtitle-2 text-caption text-left font-weight-regular"},{default:t(()=>[e(M,{class:"mb-1 mr-2"},{default:t(()=>[i("mdi-plus")]),_:1}),i("New project")]),_:1},8,["onClick"]),e(je,{class:"my-2"}),e(v,{density:"compact",class:"rounded-lg mb-2 text-caption text-center font-weight-regular"},{default:t(()=>[i("Sorry no templates available")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(P,{style:{overflow:"auto"},id:"project-list"},{default:t(()=>[(r(),f(Y,null,{fallback:t(()=>[(r(),V(R,null,U(8,s=>e(xe,{loading:"",type:"heading"})),64))]),default:t(()=>[e(m)]),_:1}))]),_:1})]),_:1})]),_:1},8,["model-value"])}}});const Oe=Z(Fe,[["__scopeId","data-v-1e0aea39"]]),le=h=>(be("data-v-e0d399b6"),h=h(),we(),h),Ee={class:"text-white mb-2 d-flex align-center mb-5"},Je={class:"d-flex flex-column"},He=le(()=>x("h4",{class:"text-center text-white my-15 mt-5"},"No project found",-1)),We=le(()=>x("h4",{class:"text-center font-weight-regular text-white mt-5"},"No available templates",-1)),Ge=I({__name:"projects",setup(h){const b=Ce;_e({title:"Projects"});const n=y(!0);return ge("showProjectsNavigation",n),(d,p)=>{const m=Oe,s=ve,w=he;return r(),V("div",null,[e(m,{"model-value":a(n)},null,8,["model-value"]),e(s),(d._.provides[X]||d.$route).params.project?(r(),f(Y,{key:0},{fallback:t(()=>[e(P,{class:"h-screen"},{default:t(()=>[e(oe,{class:"h-100 w-100",id:"loading-layout"},{default:t(()=>[e(ae,{density:"compact",class:"border-b",flat:"",style:{"background-color":"rgba(0,0,0,.5)"}},{default:t(()=>[e(u,{color:"background",variant:"tonal",class:"ml-5 rounded-lg",width:"40",height:"30"}),e(u,{color:"background",variant:"tonal",class:"ml-5 rounded-lg",width:"250",height:"30"}),e(B),e(u,{color:"background",variant:"tonal",class:"mr-5 rounded-lg",width:"90",height:"30"}),e(u,{color:"background",variant:"tonal",class:"mr-5 rounded-lg",width:"90",height:"30"}),e(u,{color:"background",variant:"tonal",class:"mr-5 rounded-circle",width:"40",height:"30"}),e(u,{color:"background",variant:"tonal",class:"mr-5 rounded-circle",width:"40",height:"30"}),e(u,{color:"background",variant:"tonal",class:"mr-5 rounded-circle",width:"40",height:"30"}),e(u,{color:"background",variant:"tonal",class:"mr-5 rounded-lg",width:"40",height:"30"})]),_:1}),e(P,{class:"h-100"},{default:t(()=>[e(u,{class:"w-100 h-100 rounded-0",color:"transparent"},{default:t(()=>[e($e,{class:"pa-0 h-100 mr-15 d-flex",fluid:""},{default:t(()=>[(r(!0),V(R,null,U(a(b),_=>(r(),f(H,{cols:"3",xl:"2",class:"h-100 pa-0 rounded-lg",key:_.section_name},{default:t(()=>[e(u,{class:"px-5 py-3 pt-10 rounded-0 h-100",style:{"background-color":"rgba(0,0,0,.2)","overflow-y":"auto"}},{default:t(()=>[x("div",Ee,[e(u,{width:"200",height:"25",color:"background",variant:"tonal"}),e(B),e(u,{class:"mr-2",width:"25",height:"25",color:"background",variant:"tonal"}),e(u,{width:"25",height:"25",color:"background",variant:"tonal"})]),(r(!0),V(R,null,U(a(b),C=>(r(),f(u,{class:"mb-5",key:C.id,variant:"tonal",color:"background",height:"60"}))),128)),e(u,{class:"text-capitalize rounded-lg",color:"background",variant:"tonal",height:"35",block:""})]),_:2},1024)]),_:2},1024))),128)),e(H,{cols:"3",xl:"2",class:"h-100 pa-0 mr-3"},{default:t(()=>[e(u,{class:"h-100 px-5 py-3 d-flex text-white rounded-0 align-center justify-center text-subtitle-2 font-weight-bold text-white",style:{"background-color":"rgba(0,0,0,.5)"}},{default:t(()=>[e(u,{variant:"tonal",width:"150",height:"35"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),default:t(()=>[e(w)]),_:1})):(r(),f(P,{key:1,class:"h-screen"},{default:t(()=>[e(u,{style:{background:"rgba(0, 0, 0, .2)"},class:"h-100 w-100 d-flex align-center justify-center"},{default:t(()=>[x("div",Je,[e(M,{style:{transform:"rotate(25deg)"},size:"200",color:"white"},{default:t(()=>[i("mdi-lightning-bolt")]),_:1}),He,e(j,{class:"text-capitalize"},{default:t(()=>[i("Create new project")]),_:1}),We])]),_:1})]),_:1}))])}}});const ht=Z(Ge,[["__scopeId","data-v-e0d399b6"]]);export{ht as default};
