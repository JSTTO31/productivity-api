import{d as Z,aD as E,F as de,r as N,L as c,v as a,x as z,A as t,B as e,y as m,a9 as A,ag as me,H as p,ah as U,C as v,V as D,z as R,I as _e,K as he,aw as pe,aI as Fe,o as Se,J as ke,Q as L,R as K,aJ as Ee,aB as Ve,D as We,E as qe,_ as xe,T as He,aK as ct,a0 as Oe,a3 as Ge,a7 as ut,c as F,a8 as Xe,aL as Ke,al as Ae,aM as pt,M as O,ae as ge,aN as ze,aO as De,aP as Ye,aQ as mt,a6 as ft,aR as vt,e as _t,ad as gt,aS as yt,aT as ht,az as kt,a4 as xt,G as wt,P as Je,ac as bt,aU as Qe,O as Re,aV as Ze,u as Pe,aW as Ct,t as Vt,at as It,S as $t}from"./entry.7bb5c275.js";import{u as Y}from"./project.e6c691c0.js";import{V as le}from"./VMenu.773dbdd7.js";import{V as B}from"./VBtn.b9a89bb9.js";import{V as ie,a as S}from"./VList.fb699aef.js";import{V as Ne}from"./VHover.4a9f2355.js";import{V as je}from"./VAppBar.7380b10f.js";import{V as ve}from"./VSpacer.97b09192.js";import{V as fe}from"./VMain.0fae4c0b.js";import{V as et}from"./VFooter.d6bcb4a7.js";import{V as ye,m as tt,u as st,a as Ie,b as St,f as zt,c as jt,d as Bt}from"./VTextField.403b1d5e.js";import{V as we}from"./VLayout.07e40625.js";import{V as ue,_ as Tt}from"./VSkeletonLoader.1d30dc85.js";import{V as ot}from"./VNavigationDrawer.5de7271e.js";import{V as At}from"./VAppBarNavIcon.a662208a.js";import{V as Dt}from"./VAppBarTitle.8ef28a1d.js";import{V as G}from"./VChip.79dac80a.js";import{V as Pt}from"./VProgressCircular.76063535.js";import{m as Rt,V as Le}from"./VSelect.9994363c.js";import{V as $e}from"./VDivider.122927b8.js";import{V as nt}from"./VTooltip.c5fd975d.js";import{u as Mt}from"./useConfetti.e0764db6.js";import{V as Ut}from"./VBadge.a7749e30.js";import{V as Nt}from"./VContainer.2db2c00e.js";import{V as ne}from"./VCol.bab0e1b8.js";import{_ as Lt}from"./DatePicker.vue.d287ee6f.js";import"./index.c5a19fc7.js";import"./ssrBoot.f83422f3.js";import"./VToolbarTitle.a3404411.js";/* empty css              */const Ft={key:0,class:"pa-5 py-1 pb-0"},Et={class:"d-flex align-center"},Wt={style:{width:"60px"},class:"h-100 d-flex align-center pa-2"},qt={class:"d-flex w-100 flex-column align-end"},Ht={key:1,class:"pa-5"},Ot={class:"d-flex flex-column"},Gt={class:"text-caption text-grey-darken-2 font-weight-regular mb-1 px-2"},Xt={class:"d-flex align-center"},Kt={style:{width:"60px"},class:"h-100 d-flex align-center pa-2"},Yt=Z({__name:"ListItemMessage",props:{message:{}},setup(i){const f=i,{user:b}=E(de()),u=Y(),d=N(!1);function g(){u.removeMessage(f.message.project,f.message._id)}function k(){u.unsentMessage(f.message.project,f.message._id)}return(C,x)=>{var V;return C.message.from._id==((V=c(b))==null?void 0:V._id)?(a(),z("div",Ft,[t(Ne,null,{default:e(({props:h,isHovering:y})=>[m("div",A({class:"d-flex align-end justify-end"},h),[m("div",Et,[m("div",Wt,[t(le,{modelValue:c(d),"onUpdate:modelValue":x[0]||(x[0]=I=>me(d)?d.value=I:null),transition:"none","no-click-animation":"",style:{"z-index":"500000"}},{activator:e(({props:I,isActive:l})=>[y||l?(a(),p(B,A({key:0},I,{style:{position:"absolute"},onClick:c(d),size:"x-small",icon:"mdi-dots-horizontal"}),null,16,["onClick"])):U("",!0)]),default:e(()=>[t(ie,null,{default:e(()=>[C.message.unsent?U("",!0):(a(),p(S,{key:0,class:"text-caption rounded-lg",density:"compact",onClick:k},{default:e(()=>[v("unsent")]),_:1})),t(S,{class:"text-caption rounded-lg",density:"compact",onClick:g},{default:e(()=>[v("Remove")]),_:1})]),_:1})]),_:2},1032,["modelValue"])]),m("div",qt,[C.message.unsent?(a(),p(D,{key:1,flat:"",class:"pa-3 py-2 rounded-lg text-subtitle-2 font-weight-regular border",color:"background",style:{"border-bottom-right-radius":"0px !important"}},{default:e(()=>[v(" unsent message ")]),_:1})):(a(),p(D,{key:0,flat:"",class:"pa-3 py-2 rounded-lg text-subtitle-2 font-weight-regular",color:"primary",style:{"border-bottom-right-radius":"0px !important"}},{default:e(()=>[v(R(C.message.text),1)]),_:1}))])])],16)]),_:1})])):(a(),z("div",Ht,[t(Ne,null,{default:e(({props:h,isHovering:y})=>[m("div",A({class:"d-flex align-end"},h),[t(_e,{class:"border mb-n1",size:"30"},{default:e(()=>[t(he,{src:"https://source.unsplash.com/random/35x35/?person&"+C.message.from._id},null,8,["src"])]),_:1}),m("div",Ot,[m("span",Gt,R(C.message.from.name.split(" ")[0]),1),m("div",Xt,[C.message.unsent?(a(),p(D,{key:1,class:"ml-2 pa-3 py-2 rounded-lg text-subtitle-2 border font-weight-regular",flat:"",style:{"border-bottom-left-radius":"0px !important"}},{default:e(()=>[v(" unsent message ")]),_:1})):(a(),p(D,{key:0,class:"ml-2 pa-3 py-2 rounded-lg text-subtitle-2 font-weight-regular",flat:"",style:{"border-bottom-left-radius":"0px !important"},variant:"tonal"},{default:e(()=>[v(R(C.message.text),1)]),_:1})),m("div",Kt,[t(le,{modelValue:c(d),"onUpdate:modelValue":x[1]||(x[1]=I=>me(d)?d.value=I:null),transition:"none","no-click-animation":"",style:{"z-index":"500000"}},{activator:e(({props:I,isActive:l})=>[y||l?(a(),p(B,A({key:0},I,{style:{position:"absolute"},onClick:c(d),size:"x-small",icon:"mdi-dots-horizontal"}),null,16,["onClick"])):U("",!0)]),default:e(()=>[t(ie,null,{default:e(()=>[t(S,{class:"text-caption rounded-lg",density:"compact",onClick:g},{default:e(()=>[v("Remove")]),_:1})]),_:1})]),_:2},1032,["modelValue"])])])])],16)]),_:1})]))}}}),Jt=""+globalThis.__publicAssetsURL("undraw/messaging.svg"),Qt=i=>(We("data-v-03b84a71"),i=i(),qe(),i),Zt={key:1},es={class:"pa-15 mt-5"},ts=Qt(()=>m("h3",{class:"mt-10 text-center"},"Welcome to team messaging! Connect, collaborate, and share ideas with your team.",-1)),ss=Z({__name:"TeamChatBox",props:{project:{}},emits:["close"],async setup(i,{emit:f}){let b,u;const d=i,g=f,k=Y(),C=N("");async function x(){const h=document.getElementById("chat-box-main");h&&h.scrollTo(0,h.scrollHeight)}async function V(){k.sendMessage(d.project._id,C.value).then(()=>{C.value="",Ve(()=>{x()})})}return pe(()=>d.project.messages.length,()=>{x()}),[b,u]=Fe(()=>k.getMessages(d.project._id)),await b,u(),Se(()=>{x()}),(h,y)=>{const I=Yt;return a(),p(we,{class:"h-100 w-100 bg-surface",style:{"z-index":"300"}},{default:e(()=>[t(je,{density:"compact",class:"pl-5 border-b",flat:""},{default:e(()=>[m("h4",null,[t(ke,null,{default:e(()=>[v("mdi-chat")]),_:1}),v(" Team Discussion ")]),t(ve),t(B,{icon:"mdi-close",class:"rounded-0",onClick:y[0]||(y[0]=l=>g("close"))})]),_:1}),t(fe,null,{default:e(()=>[h.project.messages.length>0?(a(),p(D,{key:0,id:"chat-box-main",class:"rounded-0 h-100 py-5",style:{"overflow-y":"auto"},flat:""},{default:e(()=>[(a(!0),z(L,null,K(h.project.messages,l=>(a(),p(I,{message:l,key:l._id},null,8,["message"]))),128))]),_:1})):(a(),z("div",Zt,[m("div",es,[t(he,{src:Jt}),ts])]))]),_:1}),t(et,{app:""},{default:e(()=>[t(ye,{onKeyup:Ee(V,["enter"]),modelValue:c(C),"onUpdate:modelValue":y[1]||(y[1]=l=>me(C)?C.value=l:null),"hide-details":"",rounded:"lg","single-line":"",density:"comfortable",variant:"solo-filled",class:"",flat:"","append-inner-icon":"mdi-send",label:"Write your message here..."},null,8,["modelValue"])]),_:1})]),_:1})}}});const os=xe(ss,[["__scopeId","data-v-03b84a71"]]);const ns=He({...tt(),...ct(Rt(),["inline"])},"VCheckbox"),Ce=Oe()({name:"VCheckbox",inheritAttrs:!1,props:ns(),emits:{"update:modelValue":i=>!0,"update:focused":i=>!0},setup(i,f){let{attrs:b,slots:u}=f;const d=Ge(i,"modelValue"),{isFocused:g,focus:k,blur:C}=st(i),x=ut(),V=F(()=>i.id||`checkbox-${x}`);return Xe(()=>{const[h,y]=Ke(b),I=Ie.filterProps(i),l=Le.filterProps(i);return t(Ie,A({class:["v-checkbox",i.class]},h,I,{modelValue:d.value,"onUpdate:modelValue":n=>d.value=n,id:V.value,focused:g.value,style:i.style}),{...u,default:n=>{let{id:s,messagesId:r,isDisabled:o,isReadonly:_}=n;return t(Le,A(l,{id:s.value,"aria-describedby":r.value,disabled:o.value,readonly:_.value},y,{modelValue:d.value,"onUpdate:modelValue":w=>d.value=w,onFocus:k,onBlur:C}),u)}})}),{}}}),ls=[{label:"Low",value:"low",color:"blue"},{label:"Medium",value:"medium",color:"warning"},{label:"High",value:"high",color:"error"}],as=[{label:"Watching",value:"watching"},{label:"Unwatching",value:"unwatching"}],is=[{label:"Completed",value:"completed"},{label:"Incomplete",value:"incomplete"}],rs={priorities:ls,watches:as,completes:is},be=i=>(We("data-v-f48c787e"),i=i(),qe(),i),ds={class:"mt-5"},cs=be(()=>m("label",{for:"",class:"text-subtitle-2"},"Priority options",-1)),us={class:"d-flex"},ps={class:"mt-2"},ms=be(()=>m("label",{for:"",class:"text-subtitle-2"},"Watch options",-1)),fs={class:"d-flex"},vs={class:"mt-2"},_s=be(()=>m("label",{for:"",class:"text-subtitle-2"},"Complete options",-1)),gs={class:"d-flex"},ys={class:"mt-2"},hs=be(()=>m("label",{for:"",class:"text-subtitle-2"},"Sections",-1)),ks={key:0,class:"d-flex flex-wrap"},xs={class:"d-flex mr-6 ml-2"},ws=be(()=>m("h4",{class:"mt-2 px-2 font-weight-medium"},"Member list",-1)),bs={key:1},Cs=Z({__name:"AppBar",setup(i){const f=N(!1),b=Ae("showProjectsNavigation"),u=N(!1),{priorities:d,watches:g,completes:k}=rs,{user:C}=E(de()),{project:x,sectionSort:V,sectionFilter:h}=E(Y());Y();const{loading:y}=Ae("saving"),I=F(()=>{var l;return x.value?(l=x.value.members.find(n=>{var s;return n.user._id==((s=C.value)==null?void 0:s._id)}))==null?void 0:l.role:null});return(l,n)=>{const s=os,r=Tt;return a(),z(L,null,[c(x)?(a(),p(ot,{key:0,style:{"z-index":"6000"},class:"d-flex justify-end",width:"400",contained:"",transition:"slide-x-reverse-transition",location:"right",modelValue:c(u),"onUpdate:modelValue":n[1]||(n[1]=o=>me(u)?u.value=o:null),permanent:""},{default:e(()=>[(a(),p(pt,null,{fallback:e(()=>[t(we,{class:"h-100 w-100 bg-surface"},{default:e(()=>[t(fe,null,{default:e(()=>[t(ue,{type:"table-tfoot"}),m("div",null,[t(ue,{class:"my-3",type:"list-item-avatar-three-line"}),t(ue,{class:"my-3",type:"list-item-avatar-three-line"}),t(ue,{class:"my-3",type:"list-item-avatar-three-line"}),t(ue,{class:"my-3",type:"list-item-avatar-three-line"}),t(ue,{class:"my-3",type:"list-item-avatar-three-line"}),t(ue,{class:"my-3",type:"list-item-avatar-three-line"})])]),_:1})]),_:1})]),default:e(()=>[t(s,{project:c(x),onClose:n[0]||(n[0]=o=>u.value=!1)},null,8,["project"])]),_:1}))]),_:1},8,["modelValue"])):U("",!0),t(je,{class:"d-flex align-center text-white",density:"compact","model-value":!!c(x),style:{"background-color":"rgba(0,0,0,.5)","z-index":"50 !important",position:"absolute"},flat:""},{default:e(()=>[t(At,{onClick:n[2]||(n[2]=O(o=>b.value=!c(b),["stop"])),class:"rounded-0"}),c(x)?(a(),p(Dt,{key:0,class:"font-weight-bold d-flex ml-2 align-center"},{default:e(()=>[ge(m("input",{class:"text-white px-2 rounded",style:{"outline-color":"white"},"onUpdate:modelValue":n[3]||(n[3]=o=>c(x).title=o)},null,512),[[ze,c(x).title]])]),_:1})):U("",!0),c(y)?(a(),p(G,{key:1,class:"rounded",variant:"text"},{prepend:e(()=>[t(Pt,{class:"mr-2",size:"15",width:"2",indeterminate:""})]),default:e(()=>[v(" Saving ")]),_:1})):(a(),p(G,{key:2,class:"rounded",variant:"text","prepend-icon":"mdi-database"},{default:e(()=>[v("Saved")]),_:1})),c(V)=="desc"?(a(),p(B,{key:3,size:"small",variant:"tonal",onClick:n[4]||(n[4]=o=>V.value=null),class:"ml-2 text-capitalize rounded","prepend-icon":"mdi-sort"},{default:e(()=>[v("Sort")]),_:1})):c(V)==null?(a(),p(B,{key:4,size:"small",variant:"tonal",onClick:n[5]||(n[5]=o=>V.value="asc"),class:"ml-2 text-capitalize rounded","prepend-icon":"mdi-sort-ascending"},{default:e(()=>[v("Sort")]),_:1})):(a(),p(B,{key:5,size:"small",variant:"tonal",onClick:n[6]||(n[6]=o=>V.value="desc"),class:"ml-2 text-capitalize rounded","prepend-icon":"mdi-sort-descending"},{default:e(()=>[v("Sort")]),_:1})),t(le,{"close-on-content-click":!1},{activator:e(({props:o})=>[t(B,A(o,{size:"small",variant:"tonal",class:"ml-2 text-capitalize rounded","prepend-icon":"mdi-filter-outline","append-icon":"mdi-chevron-down"}),{default:e(()=>[v("filter")]),_:2},1040)]),default:e(()=>[t(D,{width:"400",class:"pa-5 mt-2 rounded-lg"},{default:e(()=>[t(ye,{modelValue:c(h).search,"onUpdate:modelValue":n[7]||(n[7]=o=>c(h).search=o),"single-line":"",label:"Search task...","prepend-inner-icon":"mdi-magnify","hide-details":"",density:"compact",variant:"outlined"},null,8,["modelValue"]),m("div",ds,[cs,m("div",us,[(a(!0),z(L,null,K(c(d),o=>(a(),p(Ce,{color:"primary",modelValue:c(h).priority,"onUpdate:modelValue":_=>c(h).priority=_,"hide-details":"",value:o.value,key:o.label,label:o.label},null,8,["modelValue","onUpdate:modelValue","value","label"]))),128))])]),m("div",ps,[ms,m("div",fs,[(a(!0),z(L,null,K(c(g),o=>(a(),p(Ce,{color:"primary","hide-details":"",modelValue:c(h).watch,"onUpdate:modelValue":_=>c(h).watch=_,key:o.label,label:o.label,value:o.value},null,8,["modelValue","onUpdate:modelValue","label","value"]))),128))])]),m("div",vs,[_s,m("div",gs,[(a(!0),z(L,null,K(c(k),o=>(a(),p(Ce,{color:"primary",modelValue:c(h).complete,"onUpdate:modelValue":_=>c(h).complete=_,"hide-details":"",key:o.label,label:o.label,value:o.value},null,8,["modelValue","onUpdate:modelValue","label","value"]))),128))])]),m("div",ys,[hs,c(x)?(a(),z("div",ks,[(a(!0),z(L,null,K(c(x).sections,o=>(a(),p(Ce,{color:"primary",modelValue:c(h).sections,"onUpdate:modelValue":n[8]||(n[8]=_=>c(h).sections=_),"hide-details":"",key:o._id||o.tempId,label:o.title,value:o._id||o.tempId},null,8,["modelValue","label","value"]))),128))])):U("",!0)])]),_:1})]),_:1}),m("div",xs,[t(le,{"open-on-hover":""},{activator:e(({props:o})=>{var _;return[m("div",A({style:{cursor:"pointer"},class:"d-flex align-center"},o),[(a(!0),z(L,null,K((_=c(x))==null?void 0:_.members,(w,W)=>(a(),p(D,{key:w._id,class:"rounded-circle mr-n4"},{default:e(()=>[t(_e,{class:"border",size:"30"},{default:e(()=>[t(he,{src:w.user.picture},null,8,["src"])]),_:2},1024)]),_:2},1024))),128))],16)]}),default:e(()=>[c(x)?(a(),p(D,{key:0,width:"350",class:"rounded"},{default:e(()=>[c(x).members?(a(),p(ie,{key:0,class:"pa-0"},{default:e(()=>[ws,t($e,{class:"my-2"}),(a(!0),z(L,null,K(c(x).members,o=>(a(),p(S,{class:"pa-2 pr-5 rounde-lg text-caption mb-2",key:o._id,"prepend-avatar":o.user.picture,"append-icon":o.role=="owner"?"mdi-account-tie":o.role=="admin"?"mdi-account-key":"mdi-account"},{title:e(()=>[v(R(o.user.name),1)]),append:e(()=>[o.role=="owner"?(a(),p(G,{key:0,color:"purple",size:"small",style:{width:"80px"},"prepend-icon":"mdi-account-tie",class:"rounded text-center"},{default:e(()=>[v("Owner")]),_:1})):o.role=="admin"?(a(),p(G,{key:1,color:"blue",size:"small",style:{width:"80px"},"prepend-icon":"mdi-account-key",class:"rounded text-center"},{default:e(()=>[v("Admin")]),_:1})):(a(),p(G,{key:2,size:"small",style:{width:"80px"},"prepend-icon":"mdi-account",class:"rounded text-center"},{default:e(()=>[v("Member")]),_:1}))]),_:2},1032,["prepend-avatar","append-icon"]))),128))]),_:1})):U("",!0)]),_:1})):U("",!0)]),_:1}),c(I)!="member"?(a(),p(D,{key:0,onClick:n[9]||(n[9]=o=>f.value=!0),class:"rounded-circle mr-n5",color:"primary",variant:"elevated"},{default:e(()=>[t(_e,{class:"border",size:"30",style:{border:"1px solid rgba(var(--v-theme-primary))"}},{default:e(()=>[t(ke,{size:"17"},{default:e(()=>[v("mdi-plus")]),_:1})]),_:1})]),_:1})):U("",!0)]),t($e,{vertical:"",class:"mx-2",inset:""}),t(nt,{text:"Discussion"},{activator:e(({props:o})=>[t(B,A(o,{variant:"text",icon:"mdi-forum",class:"rounded-lg",size:"small",onClick:n[10]||(n[10]=_=>u.value=!c(u))}),null,16)]),_:1})]),_:1},8,["model-value"]),c(x)?(a(),z("div",bs,[t(r,{"show-dialog":c(f),"onUpdate:showDialog":n[11]||(n[11]=o=>me(f)?f.value=o:null),project:c(x)},null,8,["show-dialog","project"])])):U("",!0)],64)}}});const Vs=xe(Cs,[["__scopeId","data-v-f48c787e"]]),Is={class:"pa-3 pt-0"},$s={class:"d-flex align-center"},Ss={class:"font-weight-medium text-subtitle-1"},zs={class:"text-caption font-weight-regular mt-1"},js={class:"d-flex mt-2",style:{gap:"10px"}},Bs={key:0,class:"d-flex align-center"},Ts=Z({__name:"ListCardItem",props:{task:{},section:{}},setup(i){const f=i,b=F(()=>De(new Date(f.task.dueDate)).value.match(/hours|hour|second|seconds|minute|minutes/ig)?"Due Today":De(new Date(f.task.dueDate)).value),{project:u}=E(Y()),d=F(()=>f.task.title.length>25?f.task.title.substring(0,25)+"...":f.task.title),g=F(()=>f.task.description.length>70?f.task.description.substring(0,70)+"...":f.task.description),{user:k}=E(de()),{role:C}=E(Y()),x=F(()=>f.task.assignees.some(l=>{var n;return l._id==((n=k.value)==null?void 0:n._id)||C.value=="admin"||C.value=="owner"})),V=Ye(),h=()=>{if(f.task.completed)f.task.completed=!1;else{Mt(),f.task.completed=!0;const l="Task Completed",n="Great job! You have successfully completed the task. ðŸŽ‰ðŸ˜Š",s="success";V.add(l,n,s)}},y=F(()=>f.task.watchBy.some(l=>{var n;return l==((n=k.value)==null?void 0:n._id)}));function I(l){var X,H,Q,ce;l.preventDefault(),l.stopPropagation();const n=document.getElementById("sections-container"),s=document.getElementById(((X=f.task)==null?void 0:X._id)||((H=f.task)==null?void 0:H.tempId)),r=s.querySelector(".handle"),o=document.getElementById(((Q=f.section)==null?void 0:Q._id)||((ce=f.section)==null?void 0:ce.tempId)),_=document.getElementsByClassName("section");let w,W,$,J,ee=s.getBoundingClientRect().x,re=s.getBoundingClientRect().y,ae=Math.floor(ee/s.clientWidth),q=Math.floor(ee/s.clientWidth);w=l.clientX,W=l.clientY,o.style.zIndex="1000",s.style.transform="rotate(-5deg)",s.style.zIndex="1000",r.style.cursor="grabbing",document.onmousemove=j,document.onmouseup=te=>{if(te.preventDefault(),document.onmousemove=null,document.onmouseup=null,s.style.position="static",s.style.top=re+"px",s.style.left=ee+"px",s.style.transform="rotate(0deg)",s.style.boxShadow="none",s.style.zIndex="100",r.style.cursor="default",o.style.zIndex="100",_[q]){const se=_[q].querySelector(".task-container");if(se){const M=Array.from(se.children).findIndex(T=>T.classList.contains("dummy"));if(M>-1&&(se.removeChild(se.children[M]),u.value)){const T=u.value.sections[q];if(T){const oe=f.task;f.section.tasks=f.section.tasks.filter(P=>P._id&&P._id!=f.task._id||P.tempId&&P.tempId!=f.task.tempId),T.tasks.splice(M,0,oe)}}}}};function j(te){te.preventDefault(),$=te.clientX-w,J=te.clientY-W,w=te.clientX,W=te.clientY,s.style.width=s.clientWidth+"px",s.style.position="fixed",s.style.boxShadow="2px 2px 5px rgba(0,0,0,.5)",re+=J,ee+=$,s.style.top=re+"px",s.style.left=ee+"px",ae=q,q=Math.floor((ee+((n==null?void 0:n.scrollLeft)||0)-s.clientWidth/2)/s.clientWidth);const se=_[q];if(se){const M=se.querySelector(".task-container");if(ae!=q){const oe=_[ae].querySelector(".task-container");if(oe){const P=Array.from(oe.children).find(Te=>Te.classList.contains("dummy"));P&&oe.removeChild(P)}}if(M)if(M.childElementCount>1){const T=Array.from(M.children).find(P=>P.getBoundingClientRect().y>=re),oe=Array.from(M.children).find(P=>P.classList.contains("dummy"));if(oe&&T&&!T.classList.contains("dummy")&&M.removeChild(oe),T&&T&&!T.classList.contains("dummy")){const P=document.createElement("div");P.style.height=s.clientHeight+"px",P.style.background="rgba(0,0,0,.5)",P.style.borderRadius="5px",P.style.marginBottom="10px",P.classList.add("dummy"),M.insertBefore(P,T)}}else{const T=document.createElement("div");T.style.height=s.clientHeight+"px",T.style.background="rgba(0,0,0,.5)",T.style.borderRadius="5px",T.style.marginBottom="10px",T.classList.add("dummy"),M.prepend(T)}}}}return Se(()=>{const n=document.getElementById(f.task._id||f.task.tempId).querySelector(".handle");n&&n.parentElement&&(n.onclick=s=>s.stopPropagation(),n.onmousedown=I)}),(l,n)=>(a(),p(D,{class:"mb-3 rounded bg-surface task",disabled:!c(x),style:{"z-index":"100 !important",cursor:"pointer"},id:l.task._id||l.task.tempId,onClick:n[2]||(n[2]=s=>{var r,o;return l.$router.push({query:{task:((r=l.task)==null?void 0:r._id)||l.task.tempId,section:((o=l.section)==null?void 0:o._id)||l.section.tempId}})})},{default:e(()=>[t(D,{class:"d-flex handle align-center justify-center rounded-lg",flat:""},{default:e(()=>[t(ke,null,{default:e(()=>[v("mdi-dots-horizontal")]),_:1})]),_:1}),t($e),m("div",Is,[m("div",$s,[m("p",Ss,R(c(d)),1),t(ve),l.task.completed?(a(),p(B,{key:0,size:"",variant:"text",onMousedown:n[0]||(n[0]=O(()=>{},["stop"])),onClick:O(h,["stop"]),color:"success",icon:"mdi-check-decagram"})):(a(),p(B,{key:1,size:"",variant:"text",onMousedown:n[1]||(n[1]=O(()=>{},["stop"])),onClick:O(h,["stop"]),icon:"mdi-check-decagram-outline"}))]),m("p",zs,R(c(g)),1),m("div",js,[t(G,{size:"small","prepend-icon":"mdi-calendar",class:"mb-1 text-capitalize rounded",color:"success"},{default:e(()=>[v(R(c(b)),1)]),_:1}),l.task.priority=="low"?(a(),p(G,{key:0,size:"small","prepend-icon":"mdi-flag-outline",class:"mb-1 text-capitalize rounded",color:"info"},{default:e(()=>[v(R(l.task.priority),1)]),_:1})):l.task.priority=="medium"?(a(),p(G,{key:1,size:"small","prepend-icon":"mdi-flag-outline",class:"mb-1 text-capitalize rounded",color:"warning"},{default:e(()=>[v(R(l.task.priority),1)]),_:1})):(a(),p(G,{key:2,size:"small","prepend-icon":"mdi-flag-outline",class:"mb-1 text-capitalize rounded",color:"error"},{default:e(()=>[v(R(l.task.priority),1)]),_:1}))]),t($e,{class:"my-1"}),l.task.assignees.length>0?(a(),z("div",Bs,[(a(!0),z(L,null,K(l.task.assignees,s=>(a(),p(D,{key:s.email,class:"rounded-circle mr-n5 border",flat:""},{default:e(()=>[t(_e,{class:"border",size:"30"},{default:e(()=>[t(he,{src:s.picture},null,8,["src"])]),_:2},1024)]),_:2},1024))),128)),t(ve),t(G,{"prepend-icon":c(y)?"mdi-eye-outline":"mdi-eye-off-outline",variant:"text",size:"small",class:"mr-2 text-capitalize rounded"},{default:e(()=>[v("Watch")]),_:1},8,["prepend-icon"]),t(Ut,{content:l.task.notes?l.task.notes.length:0,location:"right",inline:""},{default:e(()=>[t(G,{"prepend-icon":"mdi-note-text-outline",variant:"text",size:"small",class:"text-capitalize rounded"},{default:e(()=>[v("Notes")]),_:1})]),_:1},8,["content"])])):U("",!0)])]),_:1},8,["disabled","id"]))}});const As=xe(Ts,[["__scopeId","data-v-74ec6e01"]]),lt=Z({__name:"PriorityChip",props:{priority:{}},emits:["update:priority"],setup(i,{emit:f}){const b=f;return(u,d)=>(a(),p(le,null,{activator:e(({props:g})=>[u.priority=="low"?(a(),p(G,A({key:0},g,{"prepend-icon":"mdi-circle-small",color:"blue",class:"px-5 rounded","append-icon":"mdi-chevron-down"}),{default:e(()=>[v("Low")]),_:2},1040)):u.priority=="medium"?(a(),p(G,A({key:1},g,{"prepend-icon":"mdi-circle-medium",color:"warning",class:"px-5 rounded","append-icon":"mdi-chevron-down"}),{default:e(()=>[v("Medium")]),_:2},1040)):(a(),p(G,A({key:2},g,{"prepend-icon":"mdi-circle",color:"error",class:"px-5 rounded","append-icon":"mdi-chevron-down"}),{default:e(()=>[v("High")]),_:2},1040))]),default:e(()=>[t(ie,{class:"mt-1 pa-2 rounded"},{default:e(()=>[t(S,{active:u.priority=="low",onClick:d[0]||(d[0]=g=>b("update:priority","low")),density:"compact","prepend-icon":"mdi-circle-small",color:"blue",class:"px-5 text-caption pr-10 w-100 mb-1 rounded"},{default:e(()=>[v("Low")]),_:1},8,["active"]),t(S,{active:u.priority=="medium",onClick:d[1]||(d[1]=g=>b("update:priority","medium")),density:"compact","prepend-icon":"mdi-circle-medium",color:"warning",class:"px-5 text-caption pr-10 w-100 mb-1 rounded"},{default:e(()=>[v("Medium")]),_:1},8,["active"]),t(S,{active:u.priority=="high",onClick:d[2]||(d[2]=g=>b("update:priority","high")),density:"compact","prepend-icon":"mdi-circle",color:"error",class:"px-5 text-caption pr-10 w-100 mb-1 rounded"},{default:e(()=>[v("High")]),_:1},8,["active"])]),_:1})]),_:1}))}});function Be(i=8){const f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",b=f.length;let u="";for(let d=0;d<i;d++)u+=f.charAt(Math.floor(Math.random()*b));return u}const Ds=He({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:i=>!isNaN(parseFloat(i))},maxRows:{type:[Number,String],validator:i=>!isNaN(parseFloat(i))},suffix:String,modelModifiers:Object,...tt(),...St()},"VTextarea"),at=Oe()({name:"VTextarea",directives:{Intersect:mt},inheritAttrs:!1,props:Ds(),emits:{"click:control":i=>!0,"mousedown:control":i=>!0,"update:focused":i=>!0,"update:modelValue":i=>!0},setup(i,f){let{attrs:b,emit:u,slots:d}=f;const g=Ge(i,"modelValue"),{isFocused:k,focus:C,blur:x}=st(i),V=F(()=>typeof i.counterValue=="function"?i.counterValue(g.value):(g.value||"").toString().length),h=F(()=>{if(b.maxlength)return b.maxlength;if(!(!i.counter||typeof i.counter!="number"&&typeof i.counter!="string"))return i.counter});function y(j,X){var H,Q;!i.autofocus||!j||(Q=(H=X[0].target)==null?void 0:H.focus)==null||Q.call(H)}const I=N(),l=N(),n=ft(""),s=N(),r=F(()=>i.persistentPlaceholder||k.value||i.active);function o(){var j;s.value!==document.activeElement&&((j=s.value)==null||j.focus()),k.value||C()}function _(j){o(),u("click:control",j)}function w(j){u("mousedown:control",j)}function W(j){j.stopPropagation(),o(),Ve(()=>{g.value="",ht(i["onClick:clear"],j)})}function $(j){var H;const X=j.target;if(g.value=X.value,(H=i.modelModifiers)!=null&&H.trim){const Q=[X.selectionStart,X.selectionEnd];Ve(()=>{X.selectionStart=Q[0],X.selectionEnd=Q[1]})}}const J=N(),ee=N(+i.rows),re=F(()=>["plain","underlined"].includes(i.variant));vt(()=>{i.autoGrow||(ee.value=+i.rows)});function ae(){i.autoGrow&&Ve(()=>{if(!J.value||!l.value)return;const j=getComputedStyle(J.value),X=getComputedStyle(l.value.$el),H=parseFloat(j.getPropertyValue("--v-field-padding-top"))+parseFloat(j.getPropertyValue("--v-input-padding-top"))+parseFloat(j.getPropertyValue("--v-field-padding-bottom")),Q=J.value.scrollHeight,ce=parseFloat(j.lineHeight),te=Math.max(parseFloat(i.rows)*ce+H,parseFloat(X.getPropertyValue("--v-input-control-height"))),se=parseFloat(i.maxRows)*ce+H||1/0,M=xt(Q??0,te,se);ee.value=Math.floor((M-H)/ce),n.value=kt(M)})}Se(ae),pe(g,ae),pe(()=>i.rows,ae),pe(()=>i.maxRows,ae),pe(()=>i.density,ae);let q;return pe(J,j=>{j?(q=new ResizeObserver(ae),q.observe(J.value)):q==null||q.disconnect()}),_t(()=>{q==null||q.disconnect()}),Xe(()=>{const j=!!(d.counter||i.counter||i.counterValue),X=!!(j||d.details),[H,Q]=Ke(b),{modelValue:ce,...te}=Ie.filterProps(i),se=zt(i);return t(Ie,A({ref:I,modelValue:g.value,"onUpdate:modelValue":M=>g.value=M,class:["v-textarea v-text-field",{"v-textarea--prefixed":i.prefix,"v-textarea--suffixed":i.suffix,"v-text-field--prefixed":i.prefix,"v-text-field--suffixed":i.suffix,"v-textarea--auto-grow":i.autoGrow,"v-textarea--no-resize":i.noResize||i.autoGrow,"v-input--plain-underlined":re.value},i.class],style:i.style},H,te,{centerAffix:ee.value===1&&!re.value,focused:k.value}),{...d,default:M=>{let{id:T,isDisabled:oe,isDirty:P,isReadonly:Te,isValid:it}=M;return t(jt,A({ref:l,style:{"--v-textarea-control-height":n.value},onClick:_,onMousedown:w,"onClick:clear":W,"onClick:prependInner":i["onClick:prependInner"],"onClick:appendInner":i["onClick:appendInner"]},se,{id:T.value,active:r.value||P.value,centerAffix:ee.value===1&&!re.value,dirty:P.value||i.dirty,disabled:oe.value,focused:k.value,error:it.value===!1}),{...d,default:rt=>{let{props:{class:Me,...Ue}}=rt;return t(L,null,[i.prefix&&t("span",{class:"v-text-field__prefix"},[i.prefix]),ge(t("textarea",A({ref:s,class:Me,value:g.value,onInput:$,autofocus:i.autofocus,readonly:Te.value,disabled:oe.value,placeholder:i.placeholder,rows:i.rows,name:i.name,onFocus:o,onBlur:x},Ue,Q),null),[[gt("intersect"),{handler:y},null,{once:!0}]]),i.autoGrow&&ge(t("textarea",{class:[Me,"v-textarea__sizer"],id:`${Ue.id}-sizer`,"onUpdate:modelValue":dt=>g.value=dt,ref:J,readonly:!0,"aria-hidden":"true"},null),[[ze,g.value]]),i.suffix&&t("span",{class:"v-text-field__suffix"},[i.suffix])])}})},details:X?M=>{var T;return t(L,null,[(T=d.details)==null?void 0:T.call(d,M),j&&t(L,null,[t("span",null,null),t(Bt,{active:i.persistentCounter||k.value,value:V.value,max:h.value},d.counter)])])}:void 0})}),yt({},I,l,s)}}),Ps={style:{gap:"5px"},class:"w-100"},Rs=m("h4",{class:"text-capitalize font-weight-regular mb-2"},"Task name",-1),Ms={style:{gap:"5px"},class:"w-75"},Us=m("h4",{class:"text-capitalize font-weight-regular mb-2"},"Assignees",-1),Ns={class:"d-flex"},Ls={style:{gap:"5px"},class:"mt-5 w-75"},Fs=m("h4",{class:"font-weight-regular mb-2"},"Due Date",-1),Es={style:{gap:"5px"}},Ws=m("h4",{class:"font-weight-regular mb-2"},"Priority",-1),qs={class:"d-flex w-75"},Hs={style:{gap:"5px"},class:"mt-5"},Os=m("h4",{class:"font-weight-regular mb-2"},"Description",-1),Gs=Z({__name:"CreateNewTaskCard",props:{section:{}},emits:["close"],setup(i,{emit:f}){const b=i,u=f,{project:d}=E(Y()),{user:g}=E(de()),k=wt({title:"New Task",description:"",dueDate:new Date().toISOString().substring(0,10),priority:"low",assignees:[g.value._id]}),C=h=>{const y=k.assignees.findIndex(I=>I==h);y==-1?k.assignees.push(h):k.assignees.splice(y,1)},x=F(()=>{var h;return((h=d.value)==null?void 0:h.members.find(y=>y.user._id==k.assignees[0]))||null}),V=()=>{var h;if(d.value){const y=d.value.sections.find(I=>I._id&&I._id==b.section._id||I.tempId&&I.tempId==b.section.tempId);if(y){const I=[...k.assignees.filter(l=>{var n;return l!=((n=g.value)==null?void 0:n._id)}),(h=g.value)==null?void 0:h._id];y.tasks=y.tasks?[...y.tasks,{...k,tempId:Be(8),watchBy:I,notes:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}]:y.tasks}u("close")}};return(h,y)=>{const I=lt;return a(),p(D,{class:"h-100 d-flex flex-column"},{default:e(()=>[t(Je,{class:"pt-5"},{default:e(()=>[m("div",Ps,[Rs,t(ye,{modelValue:c(k).title,"onUpdate:modelValue":y[0]||(y[0]=l=>c(k).title=l),density:"compact",variant:"solo-filled",flat:"",class:"w-100",placeholder:"What is your task?"},null,8,["modelValue"])]),m("div",Ms,[Us,m("div",Ns,[t(le,{"close-on-content-click":!1},{activator:e(({props:l})=>[c(x)?(a(),p(S,A({key:0},l,{variant:"tonal",class:"rounded w-100 pa-1","append-icon":"mdi-chevron-down",density:"compact","prepend-avatar":"https://source.unsplash.com/random/50x50/?person"}),{default:e(()=>[v(R(c(x).user.name),1)]),_:2},1040)):(a(),p(S,A({key:1},l,{variant:"tonal",class:"rounded w-100 pa-1 py-2","append-icon":"mdi-chevron-down",density:"compact","prepend-icon":"mdi-account"}),{default:e(()=>[v("Assignees")]),_:2},1040))]),default:e(()=>[c(d)?(a(),p(ie,{key:0,class:"rounded mt-2 pa-0"},{default:e(()=>[(a(!0),z(L,null,K(c(d).members,l=>(a(),p(S,{onClick:n=>C(l.user._id),active:c(k).assignees.some(n=>n==l.user._id),color:"primary","prepend-avatar":"https://source.unsplash.com/random/50x50/?person",class:"text-capitalize text-caption py-2 border-b font-weight-regular",density:"compact",key:l._id},{default:e(()=>[v(R(l.user.name),1)]),_:2},1032,["onClick","active"]))),128))]),_:1})):U("",!0)]),_:1})])]),m("div",Ls,[Fs,t(ye,{modelValue:c(k).dueDate,"onUpdate:modelValue":y[1]||(y[1]=l=>c(k).dueDate=l),min:"5","prepend-inner-icon":"mdi-calendar",variant:"solo-filled",flat:"",density:"compact",type:"date"},null,8,["modelValue"])]),m("div",Es,[Ws,m("div",qs,[t(I,{priority:c(k).priority,"onUpdate:priority":y[2]||(y[2]=l=>c(k).priority=l)},null,8,["priority"])])]),m("div",Hs,[Os,t(at,{modelValue:c(k).description,"onUpdate:modelValue":y[3]||(y[3]=l=>c(k).description=l),rows:"3","no-resize":"",class:"mt-2","single-line":"",variant:"solo-filled",flat:"",density:"comfortable",label:"What is the details?"},null,8,["modelValue"])])]),_:1}),t(bt,null,{default:e(()=>[t(B,{class:"text-capitalize",variant:"elevated",color:"primary",flat:"",onClick:V},{default:e(()=>[v("Save")]),_:1}),t(B,{class:"text-capitalize",flat:"",onClick:y[4]||(y[4]=l=>u("close"))},{default:e(()=>[v("Cancel")]),_:1})]),_:1})]),_:1})}}});function Xs(i){const{project:f}=E(Y()),b=document.getElementsByClassName("section-parent"),u=document.getElementsByClassName("section"),d=document.getElementById(i._id||i.tempId);if(d){let g=function(k){k.preventDefault();const C=d.offsetLeft;let x=null,V=d.getBoundingClientRect().right,h=d.getBoundingClientRect().left,y=parseInt(d.getAttribute("data-section-order")),I=parseInt(d.getAttribute("data-section-order"));d.style.cursor="grabbing",d.parentElement.style.background="rgba(0, 0, 0, 0.3)",document.onmousemove=l,document.onmouseup=n;function l(s){s.preventDefault(),d.style.position="absolute",d.style.left=d.offsetLeft+s.movementX+"px",d.style.width=d.clientWidth+"px",d.style.background="rgba(0,0,0,.5)",d.style.zIndex="500",x=s.movementX>0?"right":s.movementX<0?"left":null,V=d.getBoundingClientRect().right-d.clientWidth/2,h=d.getBoundingClientRect().left+d.clientWidth/2,Array.from(u).forEach(r=>{if(V>r.getBoundingClientRect().left&&r.id!=(i._id||i.tempId)){const o=parseInt(r.getAttribute("data-section-order"));x=="right"&&y<o&&(r.style.left=r.offsetLeft-r.getBoundingClientRect().width+"px",r.setAttribute("data-section-order",y.toString()),y=o)}if(h<r.getBoundingClientRect().right&&r.id!=(i._id||i.tempId)){const o=parseInt(r.getAttribute("data-section-order"));x=="left"&&y>o&&(r.style.left=r.offsetLeft+r.getBoundingClientRect().width+"px",r.setAttribute("data-section-order",y.toString()),y=o)}Array.from(b).forEach(o=>{const _=o,w=parseInt(_.getAttribute("data-parent-order"));_.style.background="none",w==y&&(_.style.background="rgba(0,0,0,.3)")})})}function n(){var r;document.onmousemove=null,document.onmouseup=null,d.style.left=C+"px",d.style.background="rgba(0,0,0,.1)",d.style.zIndex="100",d.style.cursor="default",Array.from(u).forEach((o,_)=>{const w=o;w.style.left="0px",w.parentElement.style.background="none",w.setAttribute("data-section-order",_.toString())});const s=(r=f.value)==null?void 0:r.sections[y];f.value.sections[y]=f.value.sections[I],f.value.sections[I]=s}};d.onmousedown=g}}const Ks={key:1},Ys={class:"h-100 px-3 task-container pb-10",color:"transparent",flat:"",style:{"overflow-y":"scroll"}},Js=Z({__name:"SectionCard",props:{section:{}},emits:["update:section"],setup(i,{emit:f}){const b=i,{user:u}=E(de()),{project:d,sectionSort:g,sectionFilter:k}=E(Y()),C=N(!1),x=N(),V=F(()=>b.section.tasks.slice().filter(n=>{let s=!0;const r=new RegExp(`${k.value.search}`,"i"),o=n.watchBy.some(_=>{var w,W;return((w=u.value)==null?void 0:w._id)&&((W=u.value)==null?void 0:W._id)==_});return k.value.search.length>0&&!r.test(n.title)&&(s=!1),k.value.complete.length<2&&(k.value.complete[0]=="completed"&&!n.completed||k.value.complete[0]=="incomplete"&&n.completed)&&(s=!1),k.value.watch.length<2&&(k.value.watch[0]=="watching"&&!o||k.value.watch[0]=="unwatching"&&o)&&(s=!1),k.value.priority.length>0&&!k.value.priority.some(_=>_==n.priority)&&(s=!1),s}).sort((n,s)=>g.value?g.value=="asc"?new Date(n.dueDate)-new Date(s.dueDate):new Date(s.dueDate)-new Date(n.dueDate):1)),h=N(!1);function y(n){d.value&&(d.value.sections=d.value.sections.filter(s=>!(s._id&&s._id==n||s.tempId&&s.tempId==n)))}function I(n){if(!d.value)return;const s=Be(8),r=d.value.sections.findIndex(o=>o._id&&o._id==b.section._id||o.tempId&&o.tempId==b.section.tempId);k.value.sections.push(s),r>-1&&n=="left"&&d.value.sections.splice(r,0,{tempId:s,title:"New Section",tasks:[],order:d.value.sections.length}),r>-1&&n=="right"&&d.value.sections.splice(r+1,0,{tempId:s,title:"New Section",tasks:[],order:d.value.sections.length})}function l(){C.value=!0;let n=setTimeout(()=>{x.value.select(),clearTimeout(n)},100)}return Se(()=>{Xs(b.section)}),(n,s)=>{const r=As,o=Gs;return a(),p(D,{class:"h-100 w-100 rounded-0 section",style:{"background-color":"rgba(0, 0, 0, 0.1)",position:"absolute",overflow:"visible","z-index":"100 !important"},id:n.section._id||n.section.tempId},{default:e(()=>[t(we,{class:"h-100 w-100",style:{overflow:"visible","z-index":"100 !important"}},{default:e(()=>[t(je,{color:"transparent",density:"compact",class:"text-white pl-4 pa-0",flat:""},{default:e(()=>[m("h4",null,[c(C)?ge((a(),z("input",{key:0,onBlur:s[0]||(s[0]=_=>C.value=!1),onMousedown:s[1]||(s[1]=O(()=>{},["stop"])),ref_key:"textField",ref:x,type:"text","onUpdate:modelValue":s[2]||(s[2]=_=>n.section.title=_),class:"text-white"},null,544)),[[ze,n.section.title]]):(a(),z("span",Ks,[v(R(n.section.title)+" ",1),t(G,{size:"small"},{default:e(()=>[v(R(n.section.tasks.length),1)]),_:1})]))]),t(ve),t(nt,{text:"New Task"},{activator:e(({props:_})=>[t(B,A(_,{variant:"text",icon:"mdi-plus",size:"small",onClick:s[3]||(s[3]=O(w=>h.value=!0,["stop"])),onMousedown:s[4]||(s[4]=O(()=>{},["stop"]))}),null,16)]),_:1}),t(le,null,{activator:e(({props:_})=>[t(B,A({onMousedown:s[5]||(s[5]=O(()=>{},["stop"])),variant:"text"},_,{icon:"mdi-dots-horizontal",size:"small"}),null,16)]),default:e(()=>[t(ie,{class:"pa-2",onMousedown:s[10]||(s[10]=O(()=>{},["stop"]))},{default:e(()=>[t(S,{density:"compact","prepend-icon":"mdi-plus",class:"text-subtitle-2 font-weight-regular rounded-lg mb-1",onClick:s[6]||(s[6]=_=>h.value=!0)},{default:e(()=>[v("New Task")]),_:1}),t(S,{density:"compact","prepend-icon":"mdi-text-short",class:"text-subtitle-2 font-weight-regular rounded-lg mb-1",onClick:l},{default:e(()=>[v("Rename")]),_:1}),t(S,{onClick:s[7]||(s[7]=_=>I("left")),density:"compact","prepend-icon":"mdi-arrow-left",class:"text-subtitle-2 font-weight-regular rounded-lg mb-1"},{default:e(()=>[v("New section left")]),_:1}),t(S,{onClick:s[8]||(s[8]=_=>I("right")),density:"compact","prepend-icon":"mdi-arrow-right",class:"text-subtitle-2 font-weight-regular rounded-lg mb-1"},{default:e(()=>[v("New section right")]),_:1}),n.section._id||n.section.tempId?(a(),p(S,{key:0,onClick:s[9]||(s[9]=_=>{var w,W;return y(((w=n.section)==null?void 0:w._id)||((W=n.section)==null?void 0:W.tempId))}),density:"compact",color:"error","prepend-icon":"mdi-trash-can-outline",class:"text-subtitle-2 font-weight-regular rounded-lg text-error"},{default:e(()=>[v("Delete")]),_:1})):U("",!0)]),_:1})]),_:1})]),_:1}),t(fe,{class:"h-100"},{default:e(()=>[m("div",Ys,[(a(!0),z(L,null,K(c(V),_=>(a(),p(r,{onMousedown:s[11]||(s[11]=O(()=>{},["stop"])),key:_._id||_.tempId,task:_,section:n.section},null,8,["task","section"]))),128)),t(B,{class:"text-capitalize text-white rounded-lg",color:"background",variant:"tonal","prepend-icon":"mdi-plus",block:"",onMousedown:s[12]||(s[12]=O(()=>{},["stop"])),onClick:s[13]||(s[13]=O(_=>h.value=!0,["stop"]))},{default:e(()=>[v(" New Task ")]),_:1})])]),_:1})]),_:1}),t(Qe,{"no-click-animation":"",fullscreen:"",modelValue:c(h),"onUpdate:modelValue":s[15]||(s[15]=_=>me(h)?h.value=_:null),persistent:"",class:"pa-15 bg-transparent",onMousedown:s[16]||(s[16]=O(()=>{},["stop"])),contained:""},{default:e(()=>[t(D,{class:"bg-transparent pa-1 rounded-0"},{default:e(()=>[t(o,{section:n.section,onClose:s[14]||(s[14]=_=>h.value=!1)},null,8,["section"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["id"])}}});const Qs=xe(Js,[["__scopeId","data-v-8266aab6"]]),Zs={class:"text-center py-2 justify-center d-flex align-center text-white"},eo=Z({__name:"SectionContainer",setup(i){const{project:f,sectionFilter:b}=E(Y()),u=Y(),d=N(null),g=N(null),k=F(()=>{var l;return((l=f.value)==null?void 0:l.sections.filter(n=>b.value.sections.some(s=>s==n._id||s==n.tempId)))||[]});function C(){if(f.value){const l=Be(8);b.value.sections.push(l),f.value.sections.push({tempId:l,title:"New Section",tasks:[],order:f.value.sections.length})}}let x=null;const{loading:V,updateLoading:h}=Ae("saving");pe(()=>[f.value],()=>{h(!0),x&&clearTimeout(x),x=setTimeout(()=>{u.update().finally(()=>{h(!1)})},500)},{deep:!0,immediate:!1});const y=Re();function I(l){if(l.query.task&&l.query.section&&f.value){const n=f.value.sections.find(s=>s._id&&s._id==l.query.section||s.tempId&&s.tempId==l.query.section);if(n){g.value=n;const s=n.tasks.find(r=>r._id&&r._id==l.query.task||r.tempId&&r.tempId==l.query.task);s&&(d.value=s)}}else d.value=null,g.value=null}return I(y),Ze((l,n,s)=>(I(l),s())),(l,n)=>{const s=Qs;return c(f)?(a(),p(D,{key:0,class:"w-100 h-100 rounded-0",color:"transparent"},{default:e(()=>[t(Nt,{class:"pa-0 h-100 d-flex w-100",fluid:"",style:{"background-color":"rgba(0,0,0,.2)","overflow-x":"auto","overflow-y":"hidden"},id:"sections-container"},{default:e(()=>[(a(!0),z(L,null,K(c(k),(r,o)=>(a(),p(ne,{cols:"3",xl:"2",class:"pa-0 rounded-0 h-100 section-parent",style:{position:"relative"},key:r._id||r.tempId,"data-parent-order":o},{default:e(()=>[(a(),p(s,{key:r._id||r.tempId,section:r,"data-section-order":o.toString()},null,8,["section","data-section-order"]))]),_:2},1032,["data-parent-order"]))),128)),t(ne,{cols:"3",xl:"2",class:"pa-0 rounded-0 w-100 h-100",style:{transition:".5s"}},{default:e(()=>[t(D,{flat:"",class:"rounded-0 h-100 d-flex align-center justify-center pa-3",onClick:C,style:{"background-color":"rgba(0,0,0,.2)"}},{default:e(()=>[m("h4",Zs,[t(ke,{class:"mr-2"},{default:e(()=>[v("mdi-plus")]),_:1}),v(" New Section ")])]),_:1})]),_:1})]),_:1})]),_:1})):U("",!0)}}});const to=xe(eo,[["__scopeId","data-v-c3fa6201"]]),so={class:"d-flex align-center"},oo={class:"d-flex align-center"},no={class:"text-subtitle-2 text-capitalize font-weight-regular"},lo={key:0,class:"text-caption mr-2 font-weight-bold"},ao={class:""},io=Z({__name:"TaskNoteCard",props:{note:{},task:{}},setup(i){const{user:f}=E(de()),b=i;let u=De(new Date(b.note.createdAt));function d(){b.task.notes=b.task.notes.filter(g=>g._id&&g._id!=b.note._id||g.tempId&&g.tempId!=b.note.tempId)}return(g,k)=>{var C;return a(),z("div",null,[m("div",so,[m("div",oo,[m("span",no,R(g.note.from.name),1)]),t(ve),g.note.createdAt?(a(),z("span",lo,R(c(u)),1)):U("",!0),g.note.from._id==((C=c(f))==null?void 0:C._id)?(a(),p(le,{key:1,location:"bottom end"},{activator:e(({props:x})=>[t(B,A(x,{icon:"mdi-dots-horizontal",size:"x-small",variant:"text"}),null,16)]),default:e(()=>[t(ie,null,{default:e(()=>[t(S,{density:"compact",onClick:d,"prepend-icon":"mdi-trash-can-outline",class:"text-error text-caption"},{default:e(()=>[v("Delete")]),_:1})]),_:1})]),_:1})):U("",!0)]),t(D,{variant:"tonal",class:"mb-4 border"},{default:e(()=>[t(Je,null,{default:e(()=>[m("p",ao,R(g.note.text),1)]),_:1})]),_:1})])}}}),ro=""+globalThis.__publicAssetsURL("undraw/quick-message.svg"),co={key:0,class:"d-flex justify-center flex-column align-center pa-10"},uo=m("h4",{class:"text-center mt-n5"},"Capture your thoughts and ideas effortlessly with our friendly notes box!",-1),po={key:1,class:"pa-5"},mo=Z({__name:"TaskMessageBox",props:{task:{}},setup(i){const f=i,{user:b}=E(de()),u=N("");function d(g){!b.value||!u.value||(f.task.notes.push({tempId:Be(8),from:b.value,text:u.value,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),u.value="")}return(g,k)=>{const C=io;return a(),p(D,{class:"h-100 w-100 rounded-0 border-s",variant:"tonal"},{default:e(()=>[t(we,{class:"h-100 w-100",flat:""},{default:e(()=>[t(fe,{class:"bg-transparent h-100",style:{"overflow-y":"auto"}},{default:e(()=>[g.task.notes.length<1?(a(),z("div",co,[t(_e,{size:"250",class:"mx-auto"},{default:e(()=>[t(he,{src:ro})]),_:1}),uo])):(a(),z("div",po,[(a(!0),z(L,null,K(g.task.notes,x=>(a(),p(C,{key:x.text,note:x,task:g.task},null,8,["note","task"]))),128))]))]),_:1}),t(et,{app:""},{default:e(()=>[t(ye,{modelValue:c(u),"onUpdate:modelValue":k[0]||(k[0]=x=>me(u)?u.value=x:null),class:"w-100",onKeyup:Ee(d,["enter"]),"single-line":"",variant:"solo-filled","hide-details":"","append-inner-icon":"mdi-send",flat:"",density:"compact",label:"write your notes"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})}}}),fo={style:{gap:"5px"},class:"mb-5 w-100"},vo={style:{gap:"5px"},class:"d-flex"},_o=m("h4",{class:"font-weight-regular"},"Section",-1),go={class:"d-flex w-75 pl-10 pr-5"},yo={style:{gap:"5px"},class:"d-flex mt-4"},ho=m("h4",{class:"font-weight-regular"},"Assignee",-1),ko={class:"d-flex pl-10 pr-10"},xo={style:{gap:"5px"},class:"d-flex mt-5"},wo=m("h4",{class:"font-weight-regular"},"Due Date",-1),bo={class:"d-flex w-75 pl-10 pr-5"},Co={style:{gap:"5px"},class:"d-flex"},Vo=m("h4",{class:"font-weight-regular"},"Priority",-1),Io={class:"d-flex pl-10 pr-10"},$o={style:{gap:"5px"},class:"d-flex mt-2"},So=Z({__name:"ShowTask",props:{task:{},section:{},fullscreen:{type:Boolean}},emits:["fullscreen"],setup(i,{emit:f}){const{user:b}=E(de()),u=i,d=f,g=F(()=>u.task.watchBy.some(r=>{var o;return r==((o=b.value)==null?void 0:o._id)})),k=F(()=>{var r;return((r=V.value)==null?void 0:r.members.find(o=>o.user._id==u.task.assignees[0]._id))||null}),C=Ye(),x=Pe(),{project:V}=E(Y()),h=F(()=>r=>r.toLocaleLowerCase()=="in progress"?"mdi-progress-wrench":r.toLocaleLowerCase()=="to do"?"mdi-progress-clock":r.toLocaleLowerCase()=="completed"?"mdi-progress-check":"mdi-file-outline");function y(){g.value?u.task.watchBy=u.task.watchBy.filter(r=>{var o;return r!=((o=b.value)==null?void 0:o._id)}):u.task.watchBy.push(b.value._id)}function I(){if(V.value){const r=V.value.sections.find(o=>!!o._id&&o._id==u.section._id||!!o.tempId&&o.tempId==u.section.tempId);if(r){r.tasks=r.tasks.filter(w=>!!w._id&&w._id!=u.task._id||!!w.tempId&&w.tempId!=u.task.tempId);const o=Pe(),_=Re();o.push({name:"r-access-projects-project",params:{project:_.params.project}})}}}function l(){if(u.task.completed)u.task.completed=!1;else{u.task.completed=!0;const r="Task Completed",o="Great job! You have successfully completed the task. ðŸŽ‰ðŸ˜Š",_="success";u.task.completed=!0,C.add(r,o,_)}}const n=r=>{var _;const o=u.task.assignees.findIndex(w=>w._id==r);if(o==-1){const w=(_=V.value)==null?void 0:_.members.find(W=>W.user._id==r);if(!w)return;u.task.assignees.push(w.user)}else u.task.assignees.splice(o,1)};function s(r){if(!V.value)return;const o=V.value.sections.find(w=>w._id&&w._id==r||w.tempId&&w.tempId==r),_=V.value.sections.find(w=>w._id&&w._id==u.section._id||w.tempId&&w.tempId==u.section.tempId);o&&_&&(o==null||o.tasks.push(u.task),_.tasks=_.tasks.filter(w=>w._id&&w._id!=u.task._id||w.tempId&&w.tempId!=u.task.tempId),x.push({query:{section:(o==null?void 0:o._id)||o.tempId,task:u.task._id||u.task.tempId}}))}return(r,o)=>{const _=mo,w=Lt,W=lt;return a(),p(we,null,{default:e(()=>[t(ot,{width:350,location:"right"},{default:e(()=>[t(_,{task:r.task},null,8,["task"])]),_:1}),t(je,{class:"d-flex rounded-0 align-center border-b",flat:""},{default:e(()=>[r.task.completed?(a(),p(B,{key:0,"prepend-icon":"mdi-check-decagram-outline",variant:"flat",color:"success",class:"text-capitalize",onClick:l},{default:e(()=>[v("Completed")]),_:1})):(a(),p(B,{key:1,"prepend-icon":"mdi-check-decagram-outline",variant:"outlined",class:"text-capitalize",onClick:l},{default:e(()=>[v("Completed")]),_:1})),c(g)?(a(),p(B,{key:2,flat:"","prepend-icon":"mdi-eye-off-outline",class:"mx-3 text-capitalize",onClick:y},{default:e(()=>[v(" unwatch")]),_:1})):(a(),p(B,{key:3,flat:"","prepend-icon":"mdi-eye-outline",class:"mx-3 text-capitalize",onClick:y},{default:e(()=>[v(" Watch")]),_:1})),t(ve),r.fullscreen?(a(),p(B,{key:5,flat:"",class:"ml-2 rounded-lg",icon:"mdi-arrow-collapse",onClick:o[1]||(o[1]=$=>d("fullscreen"))})):(a(),p(B,{key:4,flat:"",class:"ml-2 rounded-lg",icon:"mdi-arrow-expand",onClick:o[0]||(o[0]=$=>d("fullscreen"))})),t(le,null,{activator:e(({props:$})=>[t(B,A({flat:""},$,{class:"ml-2 rounded-lg",icon:"mdi-dots-horizontal"}),null,16)]),default:e(()=>[t(ie,{class:"rounded-lg"},{default:e(()=>[r.task.completed?(a(),p(S,{key:1,class:"pr-10",onClick:l,"prepend-icon":"mdi-cancel"},{default:e(()=>[v("Mark as uncompleted")]),_:1})):(a(),p(S,{key:0,class:"pr-10",onClick:l,"prepend-icon":"mdi-check-circle-outline"},{default:e(()=>[v("Mark as completed")]),_:1})),c(g)?(a(),p(S,{key:3,class:"pr-10",onClick:y,"prepend-icon":"mdi-eye-off-outline"},{default:e(()=>[v("Unwatch")]),_:1})):(a(),p(S,{key:2,class:"pr-10",onClick:y,"prepend-icon":"mdi-eye-outline"},{default:e(()=>[v("Watch")]),_:1})),r.fullscreen?(a(),p(S,{key:5,class:"pr-10",onClick:o[3]||(o[3]=$=>d("fullscreen")),"prepend-icon":"mdi-arrow-collapse"},{default:e(()=>[v("Minimize")]),_:1})):(a(),p(S,{key:4,class:"pr-10",onClick:o[2]||(o[2]=$=>d("fullscreen")),"prepend-icon":"mdi-arrow-expand"},{default:e(()=>[v("Fullscreen")]),_:1})),t(S,{class:"text-error pr-10",onClick:I,"prepend-icon":"mdi-trash-can-outline"},{default:e(()=>[v("Delete")]),_:1})]),_:1})]),_:1}),t(B,{class:"ml-2 rounded-lg",icon:"mdi-close",flat:"",onClick:o[4]||(o[4]=$=>r.$router.push({name:"r-access-projects-project",params:{project:(r._.provides[Ct]||r.$route).params.project}}))})]),_:1}),t(fe,{style:{"overflow-y":"hidden"}},{default:e(()=>[t(D,{class:"pa-5 rounded-0 h-100",style:{"overflow-y":"auto"}},{default:e(()=>[m("div",fo,[ge(m("input",{variant:"plain",class:"w-100","onUpdate:modelValue":o[5]||(o[5]=$=>r.task.title=$),style:{"font-size":"22px","font-family":"'Roboto', sans-serif","font-weight":"500"},placeholder:"What is your task?"},null,512),[[ze,r.task.title]])]),m("div",vo,[t(ne,{cols:"2",class:"px-0"},{default:e(()=>[_o]),_:1}),t(ne,{class:"px-0"},{default:e(()=>[m("div",go,[t(le,null,{activator:e(({props:$})=>[t(S,A({variant:"tonal"},$,{class:"text-capitalize rounded w-100","append-icon":"mdi-chevron-down","prepend-icon":c(h)(r.section.title)}),{default:e(()=>[v(R(r.section.title),1)]),_:2},1040,["prepend-icon"])]),default:e(()=>[c(V)?(a(),p(ie,{key:0},{default:e(()=>[(a(!0),z(L,null,K(c(V).sections.filter($=>$._id&&$._id!=u.section._id||$.tempId&&$.tempId!=u.section.tempId),$=>(a(),p(S,{onClick:J=>s($._id||$.tempId||"-1"),key:$._id,"prepend-icon":c(h)($.title)},{default:e(()=>[v(R($.title),1)]),_:2},1032,["onClick","prepend-icon"]))),128))]),_:1})):U("",!0)]),_:1})])]),_:1})]),m("div",yo,[t(ne,{cols:"2",class:"px-0"},{default:e(()=>[ho]),_:1}),t(ne,{class:"px-0"},{default:e(()=>[m("div",ko,[t(le,{"close-on-content-click":!1},{activator:e(({props:$})=>[c(k)?(a(),p(S,A({key:0},$,{variant:"tonal",class:"rounded w-75","append-icon":"mdi-chevron-down",density:"compact","prepend-avatar":c(k).user.picture}),{default:e(()=>[v(R(c(k).user.name),1)]),_:2},1040,["prepend-avatar"])):(a(),p(S,A({key:1},$,{variant:"tonal",class:"rounded w-75 pa-1 py-2","append-icon":"mdi-chevron-down",density:"compact","prepend-icon":"mdi-account"}),{default:e(()=>[v("Assignees")]),_:2},1040))]),default:e(()=>[c(V)?(a(),p(ie,{key:0,class:"pa-0"},{default:e(()=>[(a(!0),z(L,null,K(c(V).members,$=>(a(),p(S,{onClick:J=>n($.user._id),active:r.task.assignees.some(J=>J._id==$.user._id),color:"primary","prepend-avatar":$.user.picture,class:"text-capitalize text-caption py-2 border-b font-weight-regular",density:"compact",key:$._id},{default:e(()=>[v(R($.user.name),1)]),_:2},1032,["onClick","active","prepend-avatar"]))),128))]),_:1})):U("",!0)]),_:1})])]),_:1})]),m("div",xo,[t(ne,{cols:"2",class:"px-0"},{default:e(()=>[wo]),_:1}),t(ne,{class:"px-0"},{default:e(()=>[m("div",bo,[t(w,{class:"w-100",date:r.task.dueDate,"onUpdate:date":o[6]||(o[6]=$=>r.task.dueDate=$)},null,8,["date"])])]),_:1})]),m("div",Co,[t(ne,{cols:"2",class:"px-0"},{default:e(()=>[Vo]),_:1}),t(ne,{class:"px-0"},{default:e(()=>[m("div",Io,[t(W,{priority:r.task.priority,"onUpdate:priority":o[7]||(o[7]=$=>r.task.priority=$)},null,8,["priority"])])]),_:1})]),m("div",$o,[t(ne,{class:"px-0"},{default:e(()=>[t(at,{modelValue:r.task.description,"onUpdate:modelValue":o[8]||(o[8]=$=>r.task.description=$),rows:"5",class:"mt-2","single-line":"",variant:"solo-filled",flat:"",density:"comfortable",label:"What is the details?"},null,8,["modelValue"])]),_:1})])]),_:1})]),_:1})]),_:1})}}}),zo={key:0},jo=m("span",{id:"teleport-dialog"},null,-1),Bo={class:"d-flex flex-column"},To=m("h4",{class:"text-center text-white my-15 mt-5"},"No project found",-1),Ao=m("h4",{class:"text-center font-weight-regular text-white mt-5"},"No available templates",-1),un=Z({__name:"[project]",async setup(i){let f,b;Vt({title:"Projects"});const{project:u,projects:d}=E(Y()),g=Y(),k=Re();Pe();const C=N(!1);function x(l){C.value=l}It("saving",{loading:C,updateLoading:x});const V=N(!1),h=N(null),y=N(null);function I(l){if(l.query.task&&l.query.section&&u.value){const n=u.value.sections.find(s=>s._id&&s._id==l.query.section||s.tempId&&s.tempId==l.query.section);if(n){y.value=n;const s=n.tasks.find(r=>r._id&&r._id==l.query.task||r.tempId&&r.tempId==l.query.task);s&&(h.value=s)}}else h.value=null,y.value=null}return[f,b]=Fe(()=>g.findById(k.params.project.toString()).then(()=>{I(k)})),await f,b(),Ze((l,n,s)=>{if(I(l),l.params.project!=n.params.project){const r=d.value.find(o=>o._id==l.params.project);r?u.value={...r}:g.findById(l.params.project.toString())}return s()}),(l,n)=>{const s=Vs,r=to,o=So;return c(u)?(a(),z("div",zo,[t(s),t(fe,{class:"pr-0 pb-0 bg h-screen"},{default:e(()=>[jo,t(D,{color:"transparent",class:"h-100 rounded-0",flat:""},{default:e(()=>[t(r,{project:c(u)},null,8,["project"]),t(Qe,{"no-click-animation":"",fullscreen:c(V),"model-value":!!c(h)&&!!c(y),persistent:"",class:"bg-transparent",onMousedown:n[1]||(n[1]=O(()=>{},["stop"])),width:c(V)?"":950,contained:"",style:{"z-index":"9000"}},{default:e(()=>[c(h)&&c(y)?(a(),p(D,{key:0,class:$t(["bg-transparent",c(V)?"rounded-0":"rounded"])},{default:e(()=>{var _;return[(a(),p(o,{section:c(y),task:c(h),onFullscreen:n[0]||(n[0]=w=>V.value=!c(V)),fullscreen:c(V),key:(_=c(h))==null?void 0:_._id},null,8,["section","task","fullscreen"]))]}),_:1},8,["class"])):U("",!0)]),_:1},8,["fullscreen","model-value","width"])]),_:1})]),_:1})])):(a(),p(fe,{key:1,class:"h-screen"},{default:e(()=>[t(D,{style:{background:"rgba(0, 0, 0, .2)"},class:"h-100 w-100 d-flex align-center justify-center"},{default:e(()=>[m("div",Bo,[t(ke,{style:{transform:"rotate(25deg)"},size:"200",color:"white"},{default:e(()=>[v("mdi-lightning-bolt")]),_:1}),To,t(B,{class:"text-capitalize",onClick:c(g).store},{default:e(()=>[v("Create new project")]),_:1},8,["onClick"]),Ao])]),_:1})]),_:1}))}}});export{un as default};
